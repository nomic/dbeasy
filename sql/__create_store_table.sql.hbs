DROP TABLE IF EXISTS {{tableName}} CASCADE;
DROP SEQUENCE IF EXISTS {{tableName}}_id_seq CASCADE;

CREATE TABLE {{tableName}} (
  {{#each columnDefinitions}}
  {{this}},{{/each}}
  -- system fields
  __bag json NOT NULL DEFAULT '{}',
  __deleted timestamp without time zone
);

{{#if hasId}}
CREATE SEQUENCE {{tableName}}_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

ALTER TABLE ONLY {{tableName}} ALTER COLUMN id SET DEFAULT nextval('{{tableName}}_id_seq'::regclass);
ALTER TABLE ONLY {{tableName}} ADD CONSTRAINT "{{tableName}}_pkey" PRIMARY KEY (id);
{{/if}}