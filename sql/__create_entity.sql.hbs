DROP TABLE IF EXISTS {{tableName}} CASCADE;
DROP SEQUENCE IF EXISTS {{tableName}}_id_seq CASCADE;

CREATE TABLE {{tableName}} (
  id bigint NOT NULL,
  creator_id bigint NOT NULL,
  created timestamp without time zone DEFAULT now() NOT NULL,
  updated timestamp without time zone DEFAULT now() NOT NULL,
  -- custom fields{{#each columnDefinitions}}
  {{this}},{{/each}}{{#each refDefinitions}}
  {{this}},{{/each}}
  --
  __bag json NOT NULL DEFAULT '{}',
  __deleted timestamp without time zone
);

CREATE SEQUENCE {{tableName}}_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

ALTER TABLE ONLY {{tableName}} ALTER COLUMN id SET DEFAULT nextval('{{tableName}}_id_seq'::regclass);
ALTER TABLE ONLY {{tableName}} ADD CONSTRAINT "{{tableName}}_pkey" PRIMARY KEY (id);
